<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="coordinateGeometry.js"></script>
    <script type="text/javascript">

      function X(x) { this.x_ = x; }
      X.prototype = Object.create(Hashable.prototype);
      X.prototype.hashCode = function() { return this.x_; };
      X.prototype.equals = function(o) { return this.x_ === o.x_; };

      function test() {
        var tester = new Tester(document.getElementById('testResults'));

        // solveQuadratic()
        tester.test('solveQuadratic(1, 0, 0)', '[0]');
        tester.test('solveQuadratic(1, 2, 0)', '[0, -2]');
        tester.test('solveQuadratic(1, 2, -8)', '[2, -4]');
        tester.test('solveQuadratic(1, 0, 1)', '[]');

        // calculateTriangleAngle()
        tester.test('calculateTriangleAngle(0, 1, 1)', '0');
        tester.test('calculateTriangleAngle(Math.sqrt(2), 1, 1)', 'Math.PI / 2');
        tester.test('calculateTriangleAngle(1, Math.sqrt(2), 1)', 'Math.PI / 4');
        tester.test('calculateTriangleAngle(1, Math.sqrt(3), 2)', 'Math.PI / 6');

        // getParameter()
        tester.test('getParameter(0, 2, 0)', '0');
        tester.test('getParameter(0, 2, 2)', '1');
        tester.test('getParameter(0, 2, 4)', '2');
        tester.test('getParameter(0, 2, -2)', '-1');
        tester.test('getParameter(0, Infinity, 2)', '0');
        tester.test('getParameter(-Infinity, 0, -2)', '1');

        // interpolate()
        tester.test('interpolate(0, 2, 0)', '0');
        tester.test('interpolate(0, 2, 1)', '2');
        tester.test('interpolate(0, 2, 2)', '4');
        tester.test('interpolate(0, Infinity, 1)', '0');
        tester.test('interpolate(-Infinity, 0, -1)', '1');

        // toZeroTwoPi()
        tester.test('toZeroTwoPi(0)', '2 * Math.PI');
        tester.test('toZeroTwoPi(0)', '2 * Math.PI');
        tester.test('toZeroTwoPi(1)', '1');
        tester.test('toZeroTwoPi(2 * Math.PI)', '2 * Math.PI');
        tester.test('toZeroTwoPi(-1)', '2 * Math.PI - 1');
        tester.test('toZeroTwoPi(-2 * Math.PI)', '2 * Math.PI');

        // toZeroMinusTwoPi()
        tester.test('toZeroMinusTwoPi(0)', '-2 * Math.PI');
        tester.test('toZeroMinusTwoPi(1)', '1 - 2 * Math.PI');
        tester.test('toZeroMinusTwoPi(2 * Math.PI)', '-2 * Math.PI');
        tester.test('toZeroMinusTwoPi(-1)', '-1');
        tester.test('toZeroMinusTwoPi(-2 * Math.PI)', '-2 * Math.PI');

        // toMinusPlusPi()
        tester.test('toMinusPlusPi(0)', '0');
        tester.test('toMinusPlusPi(1)', '1');
        tester.test('toMinusPlusPi(2 * Math.PI)', '0');
        tester.test('toMinusPlusPi(-1)', '-1');
        tester.test('toMinusPlusPi(-2 * Math.PI)', '0');

        // HashSet.contains()
        tester.test('new HashSet().contains(new X(0))', 'false');
        tester.test('new HashSet().add(new X(0)).add(new X(1)).contains(new X(0))', 'true');
        tester.test('new HashSet().add(new X(0)).add(new X(1)).contains(new X(2))', 'false');

        // getClosestPairs()
        tester.test(
            'getClosestPairs([new X(0), new X(10), new X(20)], [new X(1), new X(11), new X(21)], function(x, y) { return Math.abs(x.x_ - y.x_);})',
            '[{left: new X(0), right: new X(1)}, {left: new X(10), right: new X(11)}, {left: new X(20), right: new X(21)}]');

        // Vector.toString()
        tester.test('new Vector(1, 2).toString()', '\'(1, 2)\'');

        // Vector.equals()
        tester.test('new Vector(1, 2).equals(new Vector(1, 2))', 'true');
        tester.test('new Vector(1, 2).equals(new Vector(1, 3))', 'false');
        tester.test('new Vector(1, Infinity).equals(new Vector(1, Infinity))', 'true');

        // Vector.add()
        tester.test('new Vector(1, 2).add(new Vector(3, 4))', 'new Vector(4, 6)');
        tester.test('new Vector(1, 2).add(new Vector(-3, -4))', 'new Vector(-2, -2)');

        // Vector.subtract()
        tester.test('new Vector(1, 2).subtract(new Vector(3, 4))', 'new Vector(-2, -2)');
        tester.test('new Vector(1, 2).subtract(new Vector(-3, -4))', 'new Vector(4, 6)');

        // Vector.multiply()
        tester.test('new Vector(1, 2).multiply(2)', 'new Vector(2, 4)');
        tester.test('new Vector(1, 2).multiply(-2)', 'new Vector(-2, -4)');
        tester.test('new Vector(-1, 2).multiply(Infinity)', 'new Vector(-Infinity, Infinity)');

        // Vector.magnitude()
        tester.test('new Vector(1 / Math.sqrt(2), 1 / Math.sqrt(2)).magnitude()', '1');
        tester.test('new Vector(1, 2).magnitude()', 'Math.sqrt(5)');
        tester.test('new Vector(1, Infinity).magnitude()', 'Infinity');

        // Vector.angle()
        tester.test('new Vector(1, Math.sqrt(3)).angle()', 'Math.PI / 3');
        tester.test('new Vector(1, -Math.sqrt(3)).angle()', '-Math.PI / 3');
        tester.test('new Vector(-1, Math.sqrt(3)).angle()', '2 * Math.PI / 3');
        tester.test('new Vector(-1, -Math.sqrt(3)).angle()', '- 2 * Math.PI / 3');

        // Vector.unit()
        tester.testApproxEquals('new Vector(1 / Math.sqrt(2), 1 / Math.sqrt(2)).unit()', 'new Vector(1 / Math.sqrt(2), 1 / Math.sqrt(2))');
        tester.testApproxEquals('new Vector(1, 2).unit()', 'new Vector(1 / Math.sqrt(5), 2 / Math.sqrt(5))');
        tester.testApproxEquals('new Vector(1, Infinity).unit()', 'new Vector(1 / Math.sqrt(5), 2 / Math.sqrt(5))');

        // Vector.unitNormal()
        tester.testApproxEquals('new Vector(1 / Math.sqrt(2), 1 / Math.sqrt(2)).unitNormal()', 'new Vector(-1 / Math.sqrt(2), 1 / Math.sqrt(2))');
        tester.testApproxEquals('new Vector(1, 2).unitNormal()', 'new Vector(-2 / Math.sqrt(5), 1 / Math.sqrt(5))');
        tester.testApproxEquals('new Vector(1, Infinity).unitNormal()', 'new Vector(-2 / Math.sqrt(5), 1 / Math.sqrt(5))');

        // Vector.dot()
        tester.test('new Vector(1, 2).dot(new Vector(1, 2))', '5');
        tester.test('new Vector(1, 2).dot(new Vector(2, -1))', '0');
        tester.test('new Vector(1, Infinity).dot(new Vector(2, -1))', '0');

        // Vector.cross()
        tester.test('new Vector(1, 2).cross(new Vector(1, 2))', '0');
        tester.test('new Vector(1, 2).cross(new Vector(-2, 1))', '5');
        tester.test('new Vector(1, 2).cross(new Vector(2, -1))', '-5');
        tester.test('new Vector(1, Infinity).cross(new Vector(2, -1))', '-5');

        // Vector.rotate()
        tester.test('new Vector(1, 2).rotate(0)', 'new Vector(1, 2)');
        tester.testApproxEquals('new Vector(1, 2).rotate(Math.PI / 2)', 'new Vector(-2, 1)');
        tester.testApproxEquals('new Vector(1, 2).rotate(Math.PI)', 'new Vector(-1, -2)');
        tester.testApproxEquals('new Vector(1, 2).rotate(3 * Math.PI / 2)', 'new Vector(2, -1)');
        tester.testApproxEquals('new Vector(1, 2).rotate(2 * Math.PI)', 'new Vector(1, 2)');
        tester.testApproxEquals('new Vector(1, Infinity).rotate(2 * Math.PI)', 'new Vector(1, 2)');

        // PointOnCurve.toString()
        tester.test('new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1).toString()', '\'[[(1, 2) -> (3, 4)] @ 1]\'');

        // PointOnCurve.equals()
        tester.test('new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1).equals(new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1))', 'true');
        tester.test('new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1).equals(new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(5, 6)), 0.5))', 'false');

        // PointOnCurve.asVector()
        tester.test('new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1).asVector()', 'new Vector(3, 4)');
        tester.test('new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(5, 6)), 0.5).asVector()', 'new Vector(3, 4)');

        // StraightLine.toString()
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).toString()', '\'[(1, 2) -> (3, 4)]\'');

        // StraightLine.equals()
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).equals(new StraightLine(new Vector(1, 2), new Vector(3, 4)))', 'true');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).equals(new StraightLine(new Vector(3, 4), new Vector(1, 2)))', 'false');

        // StraightLine.getPointAtParameter()
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(-1)', 'new Vector(-1, 0)');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(0)', 'new Vector(1, 2)');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(0.5)', 'new Vector(2, 3)');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(1)', 'new Vector(3, 4)');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(2)', 'new Vector(5, 6)');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).getPointAtParameter(Infinity)', 'new Vector(5, 6)');
        tester.test('new StraightLine(new Vector(1, Infinity), new Vector(3, 4)).getPointAtParameter(0)', 'new Vector(5, 6)');
        tester.test('new StraightLine(new Vector(1, Infinity), new Vector(3, 4)).getPointAtParameter(1)', 'new Vector(5, 6)');

        // StraightLine.shiftOrthogonal()
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).shiftOrthogonal(-Math.sqrt(2))', 'new StraightLine(new Vector(2, 1), new Vector(4, 3))');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).shiftOrthogonal(0)', 'new StraightLine(new Vector(1, 2), new Vector(3, 4))');
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).shiftOrthogonal(Math.sqrt(2))', 'new StraightLine(new Vector(0, 3), new Vector(2, 5))');

        // StraightLine.getIntersectionsWithStraightLine()
        tester.test(
            'new StraightLine(new Vector(1, 2), new Vector(3, 4)).getIntersectionsWithStraightLine(new StraightLine(new Vector(1, 4), new Vector(3, 2)))',
            '[new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 0.5)]');
        tester.test(
            'new StraightLine(new Vector(1, 2), new Vector(3, 4)).getIntersectionsWithStraightLine(new StraightLine(new Vector(3, 6), new Vector(5, 4)))',
            '[new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 1.5)]');
        tester.test(
            'new StraightLine(new Vector(1, 2), new Vector(3, 4)).getIntersectionsWithStraightLine(new StraightLine(new Vector(1, 1), new Vector(3, 3)))',
            '[new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), Infinity)]');
        tester.test(
            'new StraightLine(new Vector(0, -Infinity), new Vector(0, Infinity)).getIntersectionsWithStraightLine(new StraightLine(new Vector(-1, 1), new Vector(1, 1)))',
            '[new PointOnCurve(new StraightLine(new Vector(0, -Infinity), new Vector(0, Infinity)), NaN)]');
        tester.test(
            'new StraightLine(new Vector(-1, 1), new Vector(1, 1)).getIntersectionsWithStraightLine(new StraightLine(new Vector(0, -Infinity), new Vector(0, Infinity)))',
            '[new PointOnCurve(new StraightLine(new Vector(-1, 1), new Vector(-1, 1)), 0.5)]');

        // StraightLine.getIntersectionsWithArc()
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).getIntersectionsWithArc(new Arc(new Vector(1, 0), 1, 0, 0, false))',
            '[]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).getIntersectionsWithArc(new Arc(new Vector(1, 1), 1, 0, 0, false))',
            '[new PointOnCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)), 0.5)]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).getIntersectionsWithArc(new Arc(new Vector(1, 2), 1, 0, 0, false))',
            '[new PointOnCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)), 1), new PointOnCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)), 0)]');

        // StraightLine.getIntersectionsWithCurve()
        tester.test(
            'new StraightLine(new Vector(1, 2), new Vector(3, 4)).getIntersectionsWithCurve(new StraightLine(new Vector(1, 4), new Vector(3, 2)))',
            '[new PointOnCurve(new StraightLine(new Vector(1, 2), new Vector(3, 4)), 0.5)]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).getIntersectionsWithCurve(new Arc(new Vector(1, 1), 1, 0, 0, false))',
            '[new PointOnCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)), 0.5)]');

        // StraightLine.split()
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).split(0.25)',
            '[new StraightLine(new Vector(0, 2), new Vector(0.5, 2)), new StraightLine(new Vector(0.5, 2), new Vector(2, 2))]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).split(1.25)',
            '[new StraightLine(new Vector(0, 2), new Vector(2.5, 2)), new StraightLine(new Vector(2.5, 2), new Vector(2, 2))]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(Infinity, 2)).split(1.25)',
            '[new StraightLine(new Vector(0, 2), new Vector(2.5, 2)), new StraightLine(new Vector(2.5, 2), new Vector(2, 2))]');
        tester.test(
            'new StraightLine(new Vector(0, 2), new Vector(2, 2)).split(Infinity)',
            '[new StraightLine(new Vector(0, 2), new Vector(2.5, 2)), new StraightLine(new Vector(2.5, 2), new Vector(2, 2))]');

        // StraightLine.getAngleAtParameter()
        tester.test('new StraightLine(new Vector(0, 0), new Vector(2, 2)).getAngleAtParameter(0.25)', 'Math.PI / 4');
        tester.test('new StraightLine(new Vector(0, 0), new Vector(2, 2)).getAngleAtParameter(Infinity)', 'Math.PI / 4');

        // StraightLine.length()
        tester.test('new StraightLine(new Vector(0, 0), new Vector(2, 2)).length()', '2 * Math.sqrt(2)');

        // StraightLine.delta()
        tester.test('new StraightLine(new Vector(1, 2), new Vector(3, 4)).delta()', 'new Vector(2, 2)');

        // Arc.getCentre()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getCentre()', 'new Vector(1, 1)');

        // Arc.getRadius()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getRadius()', '1');

        // Arc.getReverse()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getReverse()', 'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 1, false).getReverse()', 'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getReverse()', 'true');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 1, true).getReverse()', 'true');

        // Arc.toString()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).toString()', '\'[(1, 1) r1 0:6.283185307179586]\'');

        // Arc.equals()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(1, 1), 1, 0, 0, false))' ,'true');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(2, 1), 1, 0, 0, false))' ,'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(1, 1), 2, 0, 0, false))' ,'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(1, 1), 1, 1, 0, false))' ,'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(1, 1), 1, 0, 1, false))' ,'false');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).equals(new Arc(new Vector(1, 1), 1, 0, 0, true))' ,'false');

        // Arc.getPointAtParameter()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getPointAtParameter(0)', 'new Vector(2, 1)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getPointAtParameter(0.25)', 'new Vector(1, 2)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getPointAtParameter(0.5)', 'new Vector(0, 1)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getPointAtParameter(0.75)', 'new Vector(1, 0)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getPointAtParameter(1)', 'new Vector(2, 1)');

        // Arc.shiftOrthogonal()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).shiftOrthogonal(0)', 'new Arc(new Vector(1, 1), 1, 0, 0, false)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).shiftOrthogonal(0.5)', 'new Arc(new Vector(1, 1), 0.5, 0, 0, false)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).shiftOrthogonal(-0.5)', 'new Arc(new Vector(1, 1), 1.5, 0, 0, false)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).shiftOrthogonal(0.5)', 'new Arc(new Vector(1, 1), 1.5, 0, 0, true)');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).shiftOrthogonal(-0.5)', 'new Arc(new Vector(1, 1), 0.5, 0, 0, true)');

        // Arc.getIntersectionsWithStraightLine()
        tester.test(
            'new Arc(new Vector(1, 0), 1, 0, 0, false).getIntersectionsWithStraightLine(new StraightLine(new Vector(0, 2), new Vector(2, 2)))',
            '[]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithStraightLine(new StraightLine(new Vector(0, 2), new Vector(2, 2)))',
            '[new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 0.25)]');
        tester.test(
            'new Arc(new Vector(1, 2), 1, 0, 0, false).getIntersectionsWithStraightLine(new StraightLine(new Vector(0, 2), new Vector(2, 2)))',
            '[new PointOnCurve(new Arc(new Vector(1, 2), 1, 0, 0, false), 0.5), new PointOnCurve(new Arc(new Vector(1, 2), 1, 0, 0, false), 0)]');

        // Arc.getIntersectionsWithArc()
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithArc(new Arc(new Vector(-2, 1), 1, 0, 0, false))',
            '[]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithArc(new Arc(new Vector(-1, 1), 1, 0, 0, false))',
            '[new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 0.5)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithArc(new Arc(new Vector(0, 1), 1, 0, 0, false))',
            '[new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 1/3), new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), (1 - 1/3))]');

        // Arc.getIntersectionsWithCurve()
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)))',
            '[new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 0.25)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 0, false).getIntersectionsWithCurve(new Arc(new Vector(-1, 1), 1, 0, 0, false))',
            '[new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 0.5)]');

        // Arc.split()
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 2, false).split(0.25)',
            '[new Arc(new Vector(1, 1), 1, 0, 0.5, false), new Arc(new Vector(1, 1), 1, 0.5, 2, false)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 2, false).split(-0.25)',
            '[new Arc(new Vector(1, 1), 1, 0, -0.5, true), new Arc(new Vector(1, 1), 1, -0.5, 2, false)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, 2, false).split(1.25)',
            '[new Arc(new Vector(1, 1), 1, 0, 2.5, false), new Arc(new Vector(1, 1), 1, 2.5, 2, true)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, -2, true).split(0.25)',
            '[new Arc(new Vector(1, 1), 1, 0, -0.5, true), new Arc(new Vector(1, 1), 1, -0.5, -2, true)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, -2, true).split(-0.25)',
            '[new Arc(new Vector(1, 1), 1, 0, 0.5, false), new Arc(new Vector(1, 1), 1, 0.5, -2, true)]');
        tester.test(
            'new Arc(new Vector(1, 1), 1, 0, -2, true).split(1.25)',
            '[new Arc(new Vector(1, 1), 1, 0, -2.5, true), new Arc(new Vector(1, 1), 1, -2.5, -2, false)]');

        // Arc.getAngleAtParameter()
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(-0.25)', '0');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(0)', 'Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(0.25)', '-Math.PI');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(0.5)', '-Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(0.75)', '0');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(1)', 'Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, false).getAngleAtParameter(1.25)', '-Math.PI');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(-0.25)', '0');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(0)', '-Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(0.25)', '-Math.PI');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(0.5)', 'Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(0.75)', '0');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(1)', '-Math.PI / 2');
        tester.test('new Arc(new Vector(1, 1), 1, 0, 0, true).getAngleAtParameter(1.25)', '-Math.PI');

        // Arc.length()
        tester.test('new Arc(new Vector(1, 1), 3, 0, Math.PI, false).length()', '3 * Math.PI');

        // Intersections.get()
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, 0, false), new StraightLine(new Vector(0, 2), new Vector(2, 2))).length',
            '1');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, 0, false), new StraightLine(new Vector(0, 2), new Vector(2, 2)))[0].getLeft()',
            'new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, 0, false), 0.25)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, 0, false), new StraightLine(new Vector(0, 2), new Vector(2, 2)))[0].getRight()',
            'new PointOnCurve(new StraightLine(new Vector(0, 2), new Vector(2, 2)), 0.5)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, 0, false), new StraightLine(new Vector(0, 2), new Vector(2, 2)))[0].type()',
            'Intersections.TYPE_INTERNAL');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false)).length',
            '2');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[0].getLeft()',
            'new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), 2/3)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[0].getRight()',
            'new PointOnCurve(new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false), 4/3)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[0].type()',
            'Intersections.TYPE_MIXED');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[1].getLeft()',
            'new PointOnCurve(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), 4/3)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[1].getRight()',
            'new PointOnCurve(new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false), 20/3)');
        tester.test(
            'Intersections.get(new Arc(new Vector(1, 1), 1, 0, Math.PI, false), new Arc(new Vector(0, 1), 1, 0, Math.PI/4, false))[1].type()',
            'Intersections.TYPE_EXTERNAL');

        // PolyCurve.getCurves()
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(1, 1), new Vector(3, -1)]).getCurves()',
            '[new StraightLine(new Vector(0, 0), new Vector(1, 1)), new StraightLine(new Vector(1, 1), new Vector(3, -1))]');

        // PolyCurve.toString()
        // TODO

        // PolyCurve.equals()
        // TODO

        // PolyCurve.getPointAtParameter()
        // TODO

        // PolyCurve.shiftOrthogonal()
        // Parallel
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(1, 1), new Vector(2, 2)]).shiftOrthogonal(Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(-1, 1), new Vector(0, 2), new Vector(1, 3)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(1, 1), new Vector(2, 2)]).shiftOrthogonal(-Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(1, -1), new Vector(2, 0), new Vector(3, 1)])');
        // Convex
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(1, 1), new Vector(2, 0)]).shiftOrthogonal(Math.sqrt(2)).getCurves()',
            '[new StraightLine(new Vector(-1, 1), new Vector(0, 2)), new Arc(new Vector(1, 1), Math.sqrt(2), 3 * Math.PI / 4, Math.PI / 4, true), new StraightLine(new Vector(2, 2), new Vector(3, 1))]');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 1), new Vector(1, 0), new Vector(2, 1)]).shiftOrthogonal(-Math.sqrt(2)).getCurves()',
            '[new StraightLine(new Vector(-1, 0), new Vector(0, -1)), new Arc(new Vector(1, 0), Math.sqrt(2), -3 * Math.PI / 4, -Math.PI / 4, false), new StraightLine(new Vector(2, -1), new Vector(3, 0))]');
        // Simple concave
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 0), new Vector(4, 2)]).shiftOrthogonal(Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(1, 3), new Vector(2, 2), new Vector(3, 3)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 2), new Vector(4, 0)]).shiftOrthogonal(-Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(1, -1), new Vector(2, 0), new Vector(3, -1)])');
        // Concave, intersection found ahead
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(3, 1), new Vector(3, 4)]).shiftOrthogonal(2)',
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(1, 2), new Vector(1, 4)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(3, -1), new Vector(3, -4)]).shiftOrthogonal(-2)',
            'PolyCurve.fromPoints([new Vector(0, -2), new Vector(1, -2), new Vector(1, -4)])');
        // Concave, intersection found behind
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(4, 0), new Vector(4, 3)]).shiftOrthogonal(2)',
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 2), new Vector(2, 3)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(4, 0), new Vector(4, -3)]).shiftOrthogonal(-2)',
            'PolyCurve.fromPoints([new Vector(0, -2), new Vector(2, -2), new Vector(2, -3)])');
        // Concave, intersection found behind after splitting
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 0), new Vector(3, 0), new Vector(5, 2)]).shiftOrthogonal(Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(1, 3), new Vector(2.5, 1.5), new Vector(4, 3)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 2), new Vector(3, 2), new Vector(5, 0)]).shiftOrthogonal(-Math.sqrt(2))',
            'PolyCurve.fromPoints([new Vector(1, -1), new Vector(2.5, 0.5), new Vector(4, -1)])');
        // Concave, intersection found ahead and behind
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(4, 0), new Vector(4, 1), new Vector(4, 4)]).shiftOrthogonal(2)',
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 2), new Vector(2, 4)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(3, 0), new Vector(4, 0), new Vector(4, -1), new Vector(4, -4)]).shiftOrthogonal(-2)',
            'PolyCurve.fromPoints([new Vector(0, -2), new Vector(2, -2), new Vector(2, -4)])');
        // Concave, intersection with inserted arc
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 0), new Vector(2, 1), new Vector(4, 1)]).shiftOrthogonal(2).getCurves()',
            '[new StraightLine(new Vector(0, 2), new Vector(2 - Math.sqrt(3), 2)), new Arc(new Vector(2, 1), 2, 5 * Math.PI / 6, Math.PI / 2, true), new StraightLine(new Vector(2, 3), new Vector(4, 3))]');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 2), new Vector(2, 1), new Vector(4, 1)]).shiftOrthogonal(-2).getCurves()',
            '[new StraightLine(new Vector(0, 0), new Vector(2 - Math.sqrt(3), 0)), new Arc(new Vector(2, 1), 2, -5 * Math.PI / 6, -Math.PI / 2, false), new StraightLine(new Vector(2, -1), new Vector(4, -1))]');
        // Concave, no intersection last
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 0), new Vector(2, 1)]).shiftOrthogonal(2)',
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 2)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 2), new Vector(2, 2), new Vector(2, 1)]).shiftOrthogonal(-2)',
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 0)])');
        // Concave, no intersection not last
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 0), new Vector(2, 1), new Vector(2, 2)]).shiftOrthogonal(3)',
            'PolyCurve.fromPoints([new Vector(0, 3), new Vector(2, 3)])');
        tester.test(
            'PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 0), new Vector(2, -1), new Vector(2, -2)]).shiftOrthogonal(-3)',
            'PolyCurve.fromPoints([new Vector(0, -3), new Vector(2, -3)])');

        // PolyCurve.getIntersectionsWithStraightLine()
        // TODO

        // PolyCurve.getIntersectionsWithArc()
        // TODO

        // PolyCurve.getIntersectionsWithCurve()
        // TODO

        // PolyCurve.split()
        // TODO

        // PolyCurve.getAngleAtParameter()
        // TODO

        // PolyCurve.length()
        tester.test('PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 2), new Vector(3, 1)]).length()', '3 * Math.sqrt(2)');
        tester.test('PolyCurve.fromPoints([new Vector(0, 0), new Vector(2, 2), new Vector(3, 1)]).shiftOrthogonal(5).length()', '3 * Math.sqrt(2) + 5 * Math.PI / 2');
      }

      function areObjectsEqual(a, b) {
        if (typeof a.equals === 'function') {
          if (!a.equals(b)) {
            throw new Error('equals() method returned false');
          }
        } else if (typeof a != typeof b) {
          throw new Error('Types unequal: ' + typeof a + ', ' + typeof b);
        } else if (typeof a == 'object') {
          var properties = Object.getOwnPropertyNames(a);
          properties.concat(Object.getOwnPropertyNames(b));
          for (var i = 0; i < properties.length; ++i) {
            var property = properties[i];
            try {
              areObjectsEqual(a[property], b[property]);
            } catch(e) {
              throw new Error('Unequal property \'' + i + '\': {' + e.message + '}');
            }
          }
        } else if (typeof a == 'number') {
          if (Math.abs(a - b) > 0.0000000001) {
            throw new Error('Unequal values ' + a + ' and ' + b);
          }
        } else if (a !== b) {
          throw new Error('Unequal values ' + a + ' and ' + b);
        }
      }
      function createTextSpan(text) {
        var span = document.createElement('span');
        span.innerText = text;
        return span;
      }
      function createDiv(className) {
        var div = document.createElement('div');
        div.className = className;
        return div;
      }

      function Tester(resultsDiv) {
        this.resultsDiv_ = resultsDiv;
        this.resultsDiv_.innerHTML = '';
        this.resultsDiv_.appendChild(createTextSpan('Test results'));
      }
      Tester.prototype.testApproxEquals = function(a, b) {
        this.test(a + '.subtract(' + b + ').magnitude()', '0');
      };
      Tester.prototype.test = function(expressionString, resultString) {
        var actual = eval(expressionString);
        // Need to make sure the eval has a return value?!
        var expected = eval('foo = ' + resultString);
        var div = createDiv('test pass');
        div.appendChild(createTextSpan(expressionString));
        try {
          areObjectsEqual(expected, actual);
          div.appendChild(createTextSpan(' : ' + resultString));
        } catch (e) {
          console.log(e.message);
          div.appendChild(createTextSpan(' : Expected ' + resultString));
          div.appendChild(createTextSpan(' : Actual ' + actual));
          div.className = 'test fail';
        }
        this.resultsDiv_.appendChild(div);
      }
    </script>
    <style type="text/css">
      div.test {
        margin: 1px;
        border: 1px solid black;
        font-size: small;
      }
      div.pass {
        background-color: green;
      }
      div.fail {
        background-color: red;
      }
    </style>
  </head>
  <body onload="test();">
    <pre id="testResults"></pre>
  <body>
</html>
